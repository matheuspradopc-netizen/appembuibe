================================================================================
ESTRUTURA COMPLETA DO BANCO DE DADOS - EXPRESSO EMBUIBE
================================================================================

RESUMO GERAL:
-------------
- Banco de Dados: SQLite (expresso_embuibe.db)
- Total de Tabelas: 8
- Total de Registros: 94,221

================================================================================
TABELAS E RELACIONAMENTOS
================================================================================

1. CIDADES (5 registros)
   â”œâ”€ id (PK)
   â”œâ”€ nome (Peruibe, Itanhaem, Mongagua, Praia Grande, Santos)
   â””â”€ ordem

2. PROPRIETARIOS (7 registros)
   â”œâ”€ id (PK)
   â”œâ”€ nome (Adelson JR, Walter, Junior, Anderson, etc.)
   â””â”€ ativo

3. MOTORISTAS (7 registros)
   â”œâ”€ id (PK)
   â”œâ”€ nome (Mauro, Walter, Zacarias, Geraldo, etc.)
   â”œâ”€ proprietario_id (FK â†’ proprietarios)
   â”œâ”€ vagas (14-15 vagas)
   â””â”€ ativo

4. LOCAIS_EMBARQUE (49 registros)
   â”œâ”€ id (PK)
   â”œâ”€ cidade_id (FK â†’ cidades)
   â”œâ”€ nome (Centro, Casa, Santa Cruz, etc.)
   â”œâ”€ valor (R$ 45,00 - R$ 100,00)
   â””â”€ ativo

5. CLIENTES (25,723 registros) â˜…â˜…â˜…
   â”œâ”€ id (PK)
   â”œâ”€ nome
   â”œâ”€ telefone
   â”œâ”€ endereco
   â”œâ”€ bairro
   â”œâ”€ cidade
   â”œâ”€ cep
   â””â”€ ativo

6. USUARIOS (3 registros)
   â”œâ”€ id (PK)
   â”œâ”€ nome (Administrador, Mariana, Daniela)
   â”œâ”€ login (admin, mariana, daniela)
   â”œâ”€ senha_hash (bcrypt)
   â”œâ”€ tipo (admin, atendente)
   â””â”€ ativo

7. PASSAGENS (68,481 registros) â˜…â˜…â˜…
   â”œâ”€ id (PK)
   â”œâ”€ numero (sequencial Ãºnico)
   â”œâ”€ cliente_id (FK â†’ clientes)
   â”œâ”€ local_embarque_id (FK â†’ locais_embarque)
   â”œâ”€ motorista_id (FK â†’ motoristas)
   â”œâ”€ atendente_id (FK â†’ usuarios)
   â”œâ”€ horario (06:00, 08:00, 10:00, 12:00, 14:00, 16:00, 18:00)
   â”œâ”€ data_viagem
   â”œâ”€ data_emissao
   â”œâ”€ valor
   â”œâ”€ forma_pagamento (DINHEIRO, CARTAO, PIX)
   â””â”€ status (EMITIDA, UTILIZADA, CANCELADA)

8. VIAGENS (1 registro) â˜… NOVO â˜…
   â”œâ”€ id (PK)
   â”œâ”€ motorista_id (FK â†’ motoristas)
   â”œâ”€ atendente_id (FK â†’ usuarios)
   â”œâ”€ data
   â”œâ”€ horario
   â”œâ”€ total_passageiros (calculado automaticamente)
   â”œâ”€ valor_total (calculado automaticamente)
   â”œâ”€ status (PENDENTE, SAIU) â† NOVO CAMPO
   â””â”€ data_saida (timestamp quando marcada como SAIU) â† NOVO CAMPO

================================================================================
FLUXO DE DADOS - LÃ“GICA SIMPLIFICADA
================================================================================

PASSO 1: EMITIR PASSAGEM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Atendente seleciona:                                        â”‚
â”‚ - Cliente                                                   â”‚
â”‚ - Local de embarque (determina valor automaticamente)      â”‚
â”‚ - Motorista                                                 â”‚
â”‚ - HorÃ¡rio (fixo: 06:00, 08:00, 10:00, 12:00, 14:00, etc.) â”‚
â”‚ - Data da viagem                                            â”‚
â”‚ - Forma de pagamento                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SISTEMA FAZ AUTOMATICAMENTE:                                â”‚
â”‚                                                             â”‚
â”‚ 1. Cria registro em PASSAGENS                               â”‚
â”‚    - status = "EMITIDA"                                     â”‚
â”‚    - gera nÃºmero sequencial                                 â”‚
â”‚                                                             â”‚
â”‚ 2. Busca VIAGEM existente com:                              â”‚
â”‚    - mesma data                                             â”‚
â”‚    - mesmo horÃ¡rio                                          â”‚
â”‚    - mesmo motorista                                        â”‚
â”‚                                                             â”‚
â”‚ 3a. Se VIAGEM EXISTE:                                       â”‚
â”‚     â†’ incrementa total_passageiros (+1)                     â”‚
â”‚     â†’ soma ao valor_total                                   â”‚
â”‚                                                             â”‚
â”‚ 3b. Se VIAGEM NÃƒO EXISTE:                                   â”‚
â”‚     â†’ cria nova VIAGEM                                      â”‚
â”‚     â†’ total_passageiros = 1                                 â”‚
â”‚     â†’ valor_total = valor da passagem                       â”‚
â”‚     â†’ status = "PENDENTE"                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PASSO 2: CONFIRMAR SAÃDA DA VAN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Atendente confirma que a van saiu:                          â”‚
â”‚ - Seleciona data, horÃ¡rio, motorista                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SISTEMA ATUALIZA:                                           â”‚
â”‚                                                             â”‚
â”‚ 1. Localiza VIAGEM correspondente                           â”‚
â”‚ 2. Atualiza status: PENDENTE â†’ SAIU                         â”‚
â”‚ 3. Registra data_saida com timestamp atual                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
RELACIONAMENTOS (FOREIGN KEYS)
================================================================================

PASSAGENS
â”œâ”€ cliente_id â†’ CLIENTES.id
â”œâ”€ local_embarque_id â†’ LOCAIS_EMBARQUE.id
â”œâ”€ motorista_id â†’ MOTORISTAS.id
â””â”€ atendente_id â†’ USUARIOS.id

VIAGENS
â”œâ”€ motorista_id â†’ MOTORISTAS.id
â””â”€ atendente_id â†’ USUARIOS.id

LOCAIS_EMBARQUE
â””â”€ cidade_id â†’ CIDADES.id

MOTORISTAS
â””â”€ proprietario_id â†’ PROPRIETARIOS.id

================================================================================
EXEMPLO DE DADOS REAIS
================================================================================

CIDADES:
1. PeruÃ­be
2. ItanhaÃ©m
3. MongaguÃ¡
4. Praia Grande
5. Santos

MOTORISTAS â†’ PROPRIETÃRIOS:
- Mauro (Adelson JR) - 15 vagas
- Walter (Walter) - 14 vagas
- Zacarias (Junior) - 14 vagas
- Geraldo (Anderson) - 14 vagas
- Jailson (Andrezinho) - 14 vagas
- Gilberto (Anderson) - 14 vagas
- Luciano (Anderson) - 14 vagas

LOCAIS DE EMBARQUE (exemplos):
PeruÃ­be:
- Centro: R$ 65,00
- Casa: R$ 65,00
- Santa Cruz: R$ 65,00
- BalneÃ¡rio Arpoador: R$ 65,00
- Jardim PeruÃ­be: R$ 65,00

ItanhaÃ©m:
- Centro: R$ 80,00
- Praia dos Sonhos: R$ 80,00
- SuarÃ£o: R$ 80,00

Santos:
- Centro: R$ 100,00
- Gonzaga: R$ 100,00
- Ponta da Praia: R$ 100,00

USUÃRIOS:
1. admin (Administrador) - tipo: admin
2. mariana (Mariana) - tipo: atendente
3. daniela (Daniela) - tipo: atendente

PASSAGENS (exemplo do primeiro registro histÃ³rico):
- NÃºmero: 1
- Cliente: CELMA/VALERIO
- Local: Centro (PeruÃ­be)
- Motorista: Mauro
- Data viagem: 2016-12-16
- HorÃ¡rio: 06:00
- Valor: R$ 40,00
- Status: UTILIZADA

VIAGENS (registro atual do teste):
- ID: 1
- Data: 2025-12-10
- HorÃ¡rio: 14:00
- Motorista: Mauro (Adelson JR)
- Total Passageiros: 1
- Valor Total: R$ 65,00
- Status: SAIU
- Data SaÃ­da: 2025-12-10 02:29:48

================================================================================
ESTATÃSTICAS DO BANCO
================================================================================

ğŸ“Š VOLUME DE DADOS:
   â€¢ 25.723 clientes cadastrados
   â€¢ 68.481 passagens emitidas (histÃ³rico desde 2016)
   â€¢ 1 viagem registrada (sistema novo)
   â€¢ 7 motoristas ativos
   â€¢ 7 proprietÃ¡rios
   â€¢ 49 locais de embarque
   â€¢ 5 cidades atendidas
   â€¢ 3 usuÃ¡rios do sistema

ğŸ’° FORMAS DE PAGAMENTO:
   â€¢ DINHEIRO
   â€¢ CARTAO
   â€¢ PIX

ğŸš STATUS DE PASSAGENS:
   â€¢ EMITIDA - Passagem vendida, aguardando viagem
   â€¢ UTILIZADA - Passagem jÃ¡ foi usada (histÃ³rico)
   â€¢ CANCELADA - Passagem cancelada

ğŸš¦ STATUS DE VIAGENS:
   â€¢ PENDENTE - Van ainda nÃ£o saiu
   â€¢ SAIU - Van jÃ¡ partiu

â° HORÃRIOS FIXOS DE OPERAÃ‡ÃƒO:
   â€¢ 06:00
   â€¢ 08:00
   â€¢ 10:00
   â€¢ 12:00
   â€¢ 14:00
   â€¢ 16:00
   â€¢ 18:00

================================================================================
CAMPOS ADICIONADOS NO SISTEMA SIMPLIFICADO
================================================================================

Tabela VIAGENS:
âœ“ status (VARCHAR 20, default "PENDENTE")
  - Controla se a van jÃ¡ saiu ou nÃ£o
  - Valores: "PENDENTE" ou "SAIU"

âœ“ data_saida (TIMESTAMP, nullable)
  - Registra quando o atendente confirmou a saÃ­da
  - NULL = ainda nÃ£o saiu
  - Data/hora = momento da confirmaÃ§Ã£o

================================================================================
INTEGRIDADE REFERENCIAL
================================================================================

Todas as tabelas com relacionamentos usam Foreign Keys para garantir:
- NÃ£o Ã© possÃ­vel deletar um cliente que tem passagens
- NÃ£o Ã© possÃ­vel deletar um motorista que tem viagens
- NÃ£o Ã© possÃ­vel deletar um local de embarque em uso
- Todos os registros relacionados sÃ£o consistentes

Campos "ativo" (soft delete):
- Permite desativar registros sem deletÃ¡-los
- MantÃ©m histÃ³rico intacto
- Presente em: clientes, proprietarios, motoristas, locais_embarque, usuarios

================================================================================
FIM DA DOCUMENTAÃ‡ÃƒO
================================================================================
